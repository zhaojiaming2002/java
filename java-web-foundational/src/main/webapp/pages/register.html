<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册</title>
    <script src="../js/jquery-3.2.1.min.js" type="text/javascript"></script>
</head>
<body>
<div style="color: red" id="message"></div>
<form action="../register" method="post">
    用户名: <input name="name" onblur="checkName(this.value)" type="text" autocomplete="off">
    <br/>
    密码:<input name="password" type="password"></br>
    <input type="submit" value="注册"></br>
</form>
<script>
    function checkName(name) {
        $.ajax({
            type: "POST",
            url: "../user",
            data: "method=checkNameValidation&name=" + name,
            dataType: "json",
            success: function (result) {
                if (result.errorMessage == null) {
                    if (result.data) {
                        $("#message").html("用户可用");
                    }
                } else {
                    $("#message").html(result.errorMessage);
                }
            },
            error: function () {
                $("#message").html("响应数据错误");
            }
        });


    }
</script>
</body>
</html>